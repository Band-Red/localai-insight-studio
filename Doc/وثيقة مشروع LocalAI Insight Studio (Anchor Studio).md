
## 1. نظرة عامة (Overview)

**Local AI Insight Studio** هو نظام بيئي متكامل (All-in-One AI Ecosystem) يعمل محلياً بالكامل. يهدف المشروع إلى تمكين المطورين من اختبار، مراقبة، وتطوير نماذج الذكاء الاصطناعي مع توفير بيئة معاينة تفاعلية للأكواد البرمجية (Web/Mobile) دون الحاجة لقواعد بيانات سحابية أو اتصال بالإنترنت، مما يضمن الخصوصية المطلقة.

## 2. فلسفة إدارة البيانات (Local-First Data Architecture)

خلافاً للأنظمة التقليدية، **لا يستخدم المشروع قواعد بيانات SQL/NoSQL**.

- **التخزين:** يعتمد كلياً على **نظام الملفات المحلي (Local File System)**.
    
- **تنسيقات الملفات:**
    
    - الإعدادات: `.json` أو `.yaml`.
        
    - السجلات (Logs): ملفات `.csv` لقراءتها عبر محرك التحليل.
        
    - المحادثات: ملفات `.md` (Markdown) متوافقة مع تطبيق **Obsidian**.
        
    - المقاييس: ملفات تسلسلية لتخزين بيانات الرسم البياني.


## 3. الميزات الرئيسية (Core Features)

### أ. التفاعل والدردشة (Advanced Chat & Context)

- **دعم المرفقات:** إمكانية إرفاق ملفات PDF، أو إرفاق **مسار مجلد كامل** ليقوم النموذج بتحليله.
    
- **RAG محلي:** معالجة الملفات المرفقة واستخراج المعلومات منها محلياً.

### ب. استوديو المعاينة التفاعلي (Interactive Sandbox)

- **Web Preview:** نافذة عرض فورية لأكواد الويب (HTML/JS/TS) مع إمكانية المعاينة الحية.
    
- **Mobile Emulator:** محاكي مدمج بأبعاد قياسية للجوال لعرض تطبيقات (Flutter, React Native, Swift, Java).
    
- **Visual Inspector:** ميزة تسمح للمستخدم بالنقر على عنصر في المعاينة (مثل زر) وكتابة تعديل، ليقوم النموذج بتعديل الكود مباشرة.
    
- **Open in Browser:** خيار لتشغيل المشروع المولد في المتصفح الافتراضي.

### ج. لوحة المراقبة (Monitoring Dashboard)

تتبع 8 أبعاد أساسية باستخدام رسوم بيانية تفاعلية:

1. **الأداء الفني:** (Accuracy, Precision, Recall, Latency, Throughput).
    
2. **جودة المخرجات:** (Hallucination Rate, Consistency, Language Quality).
    
3. **الموارد:** (CPU/GPU Usage, Memory, Context Length).
    
4. **السلوك:** (Query Volume, Bounce Rates, User Ratings).
    
5. **الأمان:** (Harmful Content, Jailbreak attempts, Bias).
    
6. **الاعتمادية:** (Uptime, Success/Failure Rates).
    
7. **سياق المحادثة:** (Conversation Length, Human Handoff Rate).
    
8. **التكامل:** (External API Health - إن وجدت).

## 4. المقاييس الحرجة والتحذيرات (Critical Monitoring Alerts)

تتضمن لوحة التحكم نظام إنذار ذكي لمراحل التدريب والضبط:

| **المرحلة**   | **المقياس**     | **التحذير (Trigger)**                  | **التفسير التقني**                                              |
| ------------- | --------------- | -------------------------------------- | --------------------------------------------------------------- |
| **SFT**       | Validation Loss | انخفاض ثم ارتفاع مفاجئ                 | **Overfitting:** النموذج بدأ يحفظ البيانات بدلاً من تعلمها.     |
| **DPO**       | Win Rate vs KL  | ارتفاع سريع للـ Win Rate مع قفزة في KL | **Reward Hacking:** النموذج يتلاعب بالمقاييس للحصول على مكافأة. |
| **الاستقرار** | KL Divergence   | تذبذبات عنيفة أو قفزة مفاجئة           | **Model Drift:** النموذج ينحرف بشكل غير آمن عن المرجع الأصلي.   |

## 5. المتطلبات التقنية (Technical Stack)

- **Frontend:** React (بدون Vite), TypeScript, External CSS files.
    
- **Backend:** Electron.js (نفس التقنية المستخدمة في LM Studio).
    
- **Analysis Engine:** Python للعمليات الإحصائية وحسابات KL Divergence.
    
- **Integration:** الربط مع تطبيق Obsidian لتصدير التوثيق.

## 6. توصيات التصميم (UI/UX)

- **التقسيم المنطقي:** لوحات منفصلة لـ (الأداء، الأمان، التكاليف، المعاينة).
    
- **التحديد الآني:** مؤشرات حية للأخطاء وتحليلات تاريخية للاتجاهات.
    
- **Drill-down:** إمكانية الضغط على أي نقطة في الرسم البياني لرؤية البيانات الخام أو المحادثة المسببة لها.

## 7. التكامل مع Obsidian

المشروع يتيح للمستخدم إعداد Documentation تلقائي عبر النموذج المرفق، حيث يتم حفظ كافة المخرجات والتحليلات في مجلد Obsidian الخاص بالمستخدم بصيغة Markdown، مما يسمح ببناء قاعدة معرفية شخصية حول أداء النماذج.

____

هذه الإضافات تنقل المشروع من مجرد "لوحة مراقبة" إلى **بيئة تطوير متكاملة (IDE) متخصصة في الذكاء الاصطناعي المحلي**. الاعتماد على نظام الملفات بدلاً من قواعد البيانات التقليدية يعزز من مفهوم "الخصوصية المطلقة" وسهولة نقل المشروع.

إليك التحديث الشامل للتوثيق والمتطلبات الفنية بناءً على الميزات الجديدة:

---

## 1. التوثيق المحدث للمشروع (Project Documentation)

### الرؤية البرمجية: "Local-First AI Studio"

النظام مصمم ليعمل كـ **Sidecar** للمطور، حيث لا يحتاج لإعدادات معقدة لقواعد البيانات. يتم تخزين الجلسات، المقاييس، والإعدادات في ملفات بتنسيق (JSON/Markdown) داخل مجلد المشروع، مما يجعلها قابلة للقراءة بشرياً وللأرشفة.

### بنية إدارة البيانات (File-Based Architecture)

- **Logs & Metrics:** تُحفظ في ملفات `.json` أو `.csv` دورية.
    
- **Chat History:** يُحفظ بتنسيق `Markdown` لدعم التنسيق البرمجي.
    
- **Configurations:** ملفات `.yaml` أو `.json` للتحكم في معايير الاستدلال.


---

## 2. تنظيم المتطلبات الجديدة للتطوير

### أولاً: وحدة التفاعل المتقدمة (Chat & Context)

- **RAG المحرك المحلي:** تطوير نظام لمعالجة ملفات PDF والمجلدات المرفقة باستخدام تقنيات (Local Embeddings) دون إرسال البيانات للخارج.
    
- **إدارة المسارات (Path Handling):** السماح للنموذج بالوصول "للقراءة فقط" لمسارات برمجية محددة لتحليل الأكواد.
    

### ثانياً: صندوق المعاينة التفاعلي (Interactive Sandbox)

هذا الجزء هو "قلب" التجربة للمطورين:

|**الميزة**|**الوصف الفني**|**الآلية**|
|---|---|---|
|**Web Preview**|عرض الكود بجانب المعاينة (Split View).|استخدام `iframe` محمي لعرض الـ HTML/JS الناتج.|
|**Visual Editor**|الضغط على عنصر (زر/نص) لتعديله.|نظام "In-place Editing" يرسل سياق العنصر المختار للنموذج لإعادة توليد الكود الخاص به فقط.|
|**Mobile Emulator**|محاكي بأبعاد الهواتف (iOS/Android).|إطار عمل React يعرض مخرجات (Flutter/React Native) عبر Web Views محاكية للموبايل.|

---

## 3. قسم مراقبة التدريب والتحذيرات (SFT & DPO Monitoring)

هذا القسم حيوي لضمان جودة النماذج أثناء مرحلة الضبط الدقيق (Fine-tuning).

### أ. مراقبة الضبط الدقيق (SFT Monitoring)

- **المقياس الحرجي:** مراقبة منحنى (Validation Loss).
    
- **التحذير:** إذا بدأ $Validation \ Loss$ في الارتفاع بينما يستمر $Training \ Loss$ في الانخفاض، يتم تفعيل تنبيه **Overfitting** (فرط التجهيز).
    

### ب. مراقبة تحسين التفضيلات (DPO Monitoring)

- **المقياس الحرجي:** نسبة الفوز (Win Rate) مقابل انحراف KL.
    
- **التحذير:** إذا كان هناك ارتفاع مفاجئ في $Win \ Rate$ متزامناً مع قفزة في $KL \ Divergence$، فهذا مؤشر على **Reward Hacking** (النموذج يتلاعب بالمقاييس للحصول على مكافأة دون تحسن حقيقي).
    

---

## 4. الهيكل البرمجي المقترح (Frontend & Logic)

بناءً على طلبك بعدم استخدام **Vite** والاعتماد على **CSS خارجي**:

- **Structure:**
    
    - `/src/renderer/components/Previewer`: مسؤول عن تشغيل نافذة المعاينة الـ Web.
        
    - `/src/renderer/components/Emulator`: مسؤول عن حاوية الجوال.
    
- **Logic:**
    
    - استخدام **Web Workers** في المتصفح لمعالجة الملفات الكبيرة (PDF) لضمان عدم تجمد الواجهة.
        
    - ربط الأزرار بخيار "Open in Browser" عبر Electron Shell API.
        

---

## 5. مصفوفة التحذيرات الفورية (Alerts Dashboard)

يجب أن تحتوي لوحة التحكم على "نظام إشارات" (Traffic Light System):

1. **اللون الأحمر:** انحراف حاد في KL أو فشل في الـ Validation.
    
2. **اللون الأصفر:** زيادة Latency (وقت الاستجابة) عن 5 ثوانٍ، أو استهلاك الذاكرة فوق 90%.
    
3. **اللون الأخضر:** استقرار الأداء والمخرجات ضمن النطاق المستهدف.
    

> **نصيحة تقنية:** بما أنك تستخدم نظام الملفات المحلي، أنصحك باستخدام **Chokidar** (مكتبة Node.js) لمراقبة التغييرات في المجلدات المرفقة لحظياً، بحيث يتم تحديث "سياق" النموذج تلقائياً بمجرد تعديلك للكود في ملف خارجي.

____
### هيكل المشروع الكامل (Structure)
Plaintext
```
LocalAI-Insight-Studio/
├── index.html
├── package.json
├── tsconfig.json
├── webpack.config.js
└── src/
    ├── main/
    │   ├── main.ts
    │   ├── preload.ts
    │   ├── obsidian_exporter.ts
    │   └── python_engine.py (Optional logic wrapper)
    └── renderer/
        ├── index.tsx
        ├── App.tsx
        ├── style.css
        ├── types/
        │   └── global.d.ts
        └── components/
            ├── ChatBox.tsx
            ├── ChatBox.module.css
            ├── Dashboard/
            │   ├── Dashboard.tsx
            │   ├── Dashboard.module.css
            │   └── FunnelChart.tsx
            ├── Emulator/
            │   ├── Emulator.tsx
            │   └── Emulator.module.css (Assume similar structure)
            └── Previewer/
                ├── Previewer.tsx
                └── Previewer.module.css (Assume similar structure)
```